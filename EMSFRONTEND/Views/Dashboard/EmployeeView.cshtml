


@{
    ViewData["Title"] = "Emplyoee Dashboard";
}
@model EMSFRONTEND.Models.EmployeeDashboardModel

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"]</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        body {
            display: flex;
            flex-direction: column;
            background-color: #f8f9fa;
        }

        /* Navbar remains at the top */
        .navbar {
            z-index: 1000;
        }

        /* Sidebar styling */
        .sidebar {
            width: 60px; 
            background-color: #343a40;
            position: fixed;
            top: 56px;
            left: 0;
            bottom: 0;
            padding-top: 20px; 
            color: white;
            transition: width 0.3s; 
            overflow: hidden; 
        }

            .sidebar.expanded {
                width: 250px;
                overflow: auto; 
            }

            .sidebar a {
                color: white;
                padding: 15px 10px;
                text-decoration: none;
                display: flex; 
                align-items: center; 
                justify-content: center; 
                white-space: nowrap; 
                transition: padding-left 0.3s;
            }

            .sidebar.expanded a {
                justify-content: flex-start; 
                padding-left: 20px;
            }


            .sidebar a:hover {
                background-color: #007bff;
            }

       
        .main-content {
            margin-left: 60px; 
            padding: 20px;
            flex-grow: 1;
            background-color: #f8f9fa;
            height: 50%; 
            overflow-y: auto; 
            transition: margin-left 0.3s; 
        }

        .sidebar.expanded ~ .main-content {
            margin-left: 250px; 
        }

       
        .btn-profile {
            padding: 0.3rem;
            font-size: 1.5rem;
        }

        
        .sidebar a {
            padding-left: 0; 
        }

        .sidebar i {
            margin-right: 10px; 
        }

        
        .sidebar a span {
            display: none; 
        }

        .sidebar.expanded a span {
            display: inline;
        }

        
        .sidebar a {
            padding-left: 0; 
        }

       
        .btn-hamburger {
            margin-right: 15px; 
        }

        .cards {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        .card {
            margin: 20px;
            padding: 20px;
            width: 300px;
            min-height: 200px;
            display: grid;
            grid-template-rows: 20px 50px 1fr 50px;
            border-radius: 10px;
            box-shadow: 0px 6px 10px rgba(0, 0, 0, 0.25);
            transition: all 0.2s;
        }

            .card:hover {
                box-shadow: 0px 6px 10px rgba(0, 0, 0, 0.4);
                transform: scale(1.01);
            }

        .card__link,
        .card__exit,
        .card__icon {
            position: relative;
            text-decoration: none;
            color: rgba(255, 255, 255, 0.9);
        }

            .card__link::after {
                position: absolute;
                top: 25px;
                left: 0;
                content: "";
                width: 0%;
                height: 3px;
                background-color: rgba(255, 255, 255, 0.6);
                transition: all 0.5s;
            }

            .card__link:hover::after {
                width: 100%;
            }

        .card__exit {
            grid-row: 1/2;
            justify-self: end;
        }

        .card__icon {
            grid-row: 2/3;
            font-size: 30px;
        }

        .card__title {
            grid-row: 3/4;
            font-weight: 400;
            color: black;
        }

        .card__apply {
            grid-row: 4/5;
            align-self: center;
        }

        /* CARD BACKGROUNDS */

        .card-1 {
            background: radial-gradient(#1fe4f5, #3fbafe);
        }

        .card-2 {
            background: radial-gradient(#fbc1cc, #fa99b2);
        }

    </style>
</head>
<body>

    <!-- Responsive Bootstrap Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
        <button class="btn btn-outline-secondary btn-hamburger" id="hamburger">
            <i class="bi bi-list"></i> <!-- Hamburger icon -->
        </button>
        <a class="navbar-brand" href="#">Employee Dashboard</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="btn btn-outline-secondary btn-profile" id="profileIcon"
                       asp-controller="Team"
                       asp-action="ProfileView"
                       asp-route-userId="@ViewBag.UserId">
                        
                        <i class="bi bi-person-circle"></i>
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <ul class="nav flex-column" style="margin-top: 30px;">
            
            <li class="nav-item">
                <a class="nav-link" href="/EmpTaskList/TaskList">
                    <i class="bi bi-list-check"></i>
                    <span>View Tasks</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/EmpTaskList/UploadTask">
                    <i class="bi bi-cloud-upload-fill"></i>
                    <span>Upload Task</span>
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="/LeaveRequest/Create">
                    <i class="bi bi-calendar-x-fill"></i>
                    <span>Leave Requests</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/Performance/MyPerformance">
                    <i class="bi bi-bar-chart-fill"></i>
                    <span>Performance</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/Auth/Logout">
                    <i class="bi bi-door-open-fill"></i>
                    <span>Logout</span>
                </a>
            </li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <h1>Welcome, @ViewBag.UserName</h1>
        
    </div>


    <div class="card-main-container">
        <div class="cards">
            <div class="card card-1">
                <div class="card__icon"><i class="fas fa-bolt"></i></div>
                <p class="card__exit"><i class="fas fa-times"></i></p>
                <h2 class="card__title">Task Assigned</h2>
                <p class="card__apply">
                    <h3><span class="card_Value">@Model.DashboardCardModel.TotalTaskAssigned</span></h3>
                </p>
            </div>
            <div class="card card-2">
                <div class="card__icon"><i class="fas fa-bolt"></i></div>
                <p class="card__exit"><i class="fas fa-times"></i></p>
                <h2 class="card__title">Task Completed.</h2>
                <p class="card__apply">
                    <h3><span class="card_Value">@Model.DashboardCardModel.TotalTaskCompleted</span></h3>
                </p>
            </div>
    </div>
    </div>

    <table class="table">
        <thead>
            <tr>
                <th scope="col">FullName</th>
                <th scope="col">Task Title</th>
                <th scope="col">Task Status</th>
                <th scope="col">Leave Reason</th>
                <th scope="col">Leave Status</th>
                <th scope="col">Task Completed Count</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var data in Model.DashboardTableModel)
            {
                <tr>
                    <td>@data.FullName</td>
                    <td>@data.TaskTitle</td>
                    <td>@data.TaskStatus</td>
                    <td>@data.LeaveReason</td>
                    <td>@data.LeaveStatus</td>
                    <td>@data.CompletedCount</td>
                </tr>
            }
        </tbody>
    </table>


    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        // Change background color of main content when profile icon is clicked
        document.getElementById('profileIcon').addEventListener('click', function () {
            const mainContent = document.getElementById('mainContent');
            mainContent.style.backgroundColor = mainContent.style.backgroundColor === 'lightblue' ? '#f8f9fa' : 'lightblue';
        });

        // Toggle sidebar expansion on hamburger click
        const sidebar = document.getElementById('sidebar');
        const hamburger = document.getElementById('hamburger');

        hamburger.addEventListener('click', function () {
            sidebar.classList.toggle('expanded');
        });

        // Expand sidebar on hover
        sidebar.addEventListener('mouseenter', function () {
            sidebar.classList.add('expanded');
        });

        // Collapse sidebar on mouse leave
        sidebar.addEventListener('mouseleave', function () {
            sidebar.classList.remove('expanded');
        });
    </script>
</body>
</html>
