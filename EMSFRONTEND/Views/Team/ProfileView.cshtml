@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model EMSFRONTEND.Models.UsersModel

@if (Model.UserId > 0) // Check if the user has an ID (existing profile)
{
	<div class="card ml-4 mb-3" style="background-color:rgb(232 236 240)">
		<div class="d-flex justify-content-center mt-2">
			<h2>@(Model.UserId > 0 ? "Profile" : "Create Profile")</h2>
		</div>
		<hr />
		<div class="card-body">
			<p><strong>Username:</strong> @Model.Username</p>
			<p><strong>Email:</strong> @Model.Email</p>
			<p><strong>Full Name:</strong> @Model.FullName</p>
			<p><strong>Role:</strong> @Model.Role</p>
			<p><strong>Manager Name:</strong> @Model.ManagerName</p>
			<p><strong>Date of Joining:</strong> @Model.DateOfJoining.ToLongDateString()</p>

			<button id="editButton" class="btn btn-outline-success">Edit Profile</button>
		</div>
	</div>
}
else // Create profile form for new users
{
	<h2>Create Profile</h2>
}

<div class="ml-4" id="editForm" style="display: @(Model.UserId > 0 ? "none" : "block")">
	<form asp-action="EditProfile" method="post">
		<input type="hidden" asp-for="UserId" />
		<input type="hidden" asp-for="Role" />
		<input type="hidden" asp-for="ManagerName" />
		<input type="hidden" asp-for="DateOfJoining" />
		<input type="hidden" asp-for="Password" />
		<div class="form-group">
			<label asp-for="Username"></label>
			<input asp-for="Username" class="form-control" />
			<span asp-validation-for="Username"></span>
		</div>
		<div class="form-group">
			<label asp-for="Email"></label>
			<input asp-for="Email" class="form-control" />
			<span asp-validation-for="Email"></span>
		</div>
		<div class="form-group">
			<label asp-for="FullName"></label>
			<input asp-for="FullName" class="form-control" />
			<span asp-validation-for="FullName"></span>
		</div>



		<div class="mt-2">
			<button type="submit" class="btn btn-success">Save</button>
			<button type="button" class="btn btn-secondary" id="cancelButton">Cancel</button>
		</div>
	</form>
</div>

@if (ViewBag.Role == "Manager")
{
	<div class="mt-3 ml-4">
		<a href="@Url.Action("ManagerView", "Dashboard")" class="btn btn-outline-primary">Back to Dashboard</a>
	</div>
}
else
{
	<div class="mt-3 ml-4">
		<a href="@Url.Action("EmployeeView", "Dashboard")" class="btn btn-outline-primary">Back to Dashboard</a>
	</div>
}




@section Scripts {
	<script>
		document.getElementById('editButton').addEventListener('click', function () {
			document.getElementById('editForm').style.display = 'block'; // Show edit form
			this.style.display = 'none'; // Hide edit button
		});

		document.getElementById('cancelButton').addEventListener('click', function () {
			document.getElementById('editForm').style.display = 'none'; // Hide edit form
			document.getElementById('editButton').style.display = 'block'; // Show edit button
		});
	</script>
}
